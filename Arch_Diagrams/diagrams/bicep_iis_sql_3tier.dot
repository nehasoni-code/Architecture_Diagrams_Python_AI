digraph "IIS + SQL Server 3-Tier Architecture (Bicep Demo)" {
	graph [bb="0,0,798,1921",
		bgcolor=white,
		compound=true,
		fontcolor="#2D3436",
		fontname="Sans-Serif",
		fontsize=14,
		label="IIS + SQL Server 3-Tier Architecture (Bicep Demo)",
		lheight=0.21,
		lp="399,11.5",
		lwidth=4.83,
		nodesep=1.0,
		pad=0.5,
		rankdir=TB,
		ranksep=1.5,
		splines=ortho
	];
	node [fixedsize=true,
		fontcolor="#2D3436",
		fontname="Sans-Serif",
		fontsize=13,
		height=1.4,
		imagescale=true,
		label="\N",
		labelloc=b,
		shape=box,
		style=rounded,
		width=1.4
	];
	edge [color="#7B8894"];
	subgraph "cluster_cust1Vnet
(10.0.0.0/16)" {
		graph [bb="8,31,790,1405",
			bgcolor="#E8F4F8",
			fontname="Sans-Serif",
			fontsize=14,
			label="cust1Vnet
(10.0.0.0/16)",
			labeljust=l,
			labelloc=t,
			lheight=0.42,
			lp="62,1386",
			lwidth=1.28,
			margin=25,
			pencolor="#AEB6BE",
			rankdir=LR,
			shape=box,
			style=dashed
		];
		subgraph "cluster_FESubnetName
(10.0.0.0/24)" {
			graph [bb="420,69.5,765,1342",
				bgcolor="#E3F2FD",
				fontname="Sans-Serif",
				fontsize=13,
				label="FESubnetName
(10.0.0.0/24)",
				labeljust=l,
				labelloc=t,
				lheight=0.39,
				lp="479,1324",
				lwidth=1.42,
				margin=20,
				pencolor="#AEB6BE",
				rankdir=LR,
				shape=box,
				style=rounded
			];
			subgraph "cluster_Availability Set" {
				graph [bb="440,89.5,745,968.5",
					bgcolor="#E8F5E9",
					fontname="Sans-Serif",
					fontsize=13,
					label="Availability Set",
					labeljust=l,
					labelloc=t,
					lheight=0.19,
					lp="497.5,957.5",
					lwidth=1.38,
					margin=15,
					pencolor="#AEB6BE",
					rankdir=LR,
					shape=box,
					style=rounded
				];
				"6f849bc834d745879c0928f3606ac7c7"	[height=2.3056,
					image="/usr/local/lib/python3.13/dist-packages/resources/azure/compute/availability-sets.png",
					label="cust1webSrvAS
(2 Fault/20 Update Domains)",
					pos="609,187.5",
					shape=none,
					width=1.4028];
				"155881870d2b4ab7834207b4c846154b"	[height=3.0972,
					image="/usr/local/lib/python3.13/dist-packages/resources/azure/compute/vm.png",
					label="cust1webSrv0
Windows Server 2022
IIS Web Server
D2s_v3",
					pos="679,532.5",
					shape=none,
					width=1.4028];
				"155881870d2b4ab7834207b4c846154b" -> "6f849bc834d745879c0928f3606ac7c7"	[color=green,
					dir=forward,
					fontcolor="#2D3436",
					fontname="Sans-Serif",
					fontsize=13,
					label=Member,
					lp="702.5,360",
					pos="e,649.17,270.76 649.17,420.96 649.17,420.96 649.17,280.76 649.17,280.76",
					style=dotted];
				"817904b345f44c8d9ed3413e66458403"	[height=3.0972,
					image="/usr/local/lib/python3.13/dist-packages/resources/azure/compute/vm.png",
					label="cust1webSrv1
Windows Server 2022
IIS Web Server
D2s_v3",
					pos="506,532.5",
					shape=none,
					width=1.4028];
				"817904b345f44c8d9ed3413e66458403" -> "6f849bc834d745879c0928f3606ac7c7"	[color=green,
					dir=forward,
					fontcolor="#2D3436",
					fontname="Sans-Serif",
					fontsize=13,
					label=Member,
					lp="570.5,360",
					pos="e,558.41,187 506,420.8 506,319.86 506,187 506,187 506,187 548.41,187 548.41,187",
					style=dotted];
				"2d41e03756384225ac516ab6b8fae448"	[height=1.9028,
					image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/network-interfaces.png",
					label=NIC0,
					pos="679,863",
					shape=none,
					width=1.4028];
				"2d41e03756384225ac516ab6b8fae448" -> "155881870d2b4ab7834207b4c846154b"	[color=darkblue,
					dir=forward,
					fontcolor="#2D3436",
					fontname="Sans-Serif",
					fontsize=13,
					pos="e,679,644.22 679,794.12 679,794.12 679,654.22 679,654.22"];
				"218cac8c02294e7dbfe43eb76de451ad"	[height=1.9028,
					image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/network-interfaces.png",
					label=NIC1,
					pos="506,863",
					shape=none,
					width=1.4028];
				"218cac8c02294e7dbfe43eb76de451ad" -> "817904b345f44c8d9ed3413e66458403"	[color=darkblue,
					dir=forward,
					fontcolor="#2D3436",
					fontname="Sans-Serif",
					fontsize=13,
					pos="e,506,644.22 506,794.12 506,794.12 506,654.22 506,654.22"];
			}
			"99f7661a01194710a75e6bbdafa93520"	[height=2.3056,
				image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/network-security-groups-classic.png",
				label="feNsg
(Allow HTTP 80)",
				pos="683,1203",
				shape=none,
				width=1.4028];
			"99f7661a01194710a75e6bbdafa93520" -> "2d41e03756384225ac516ab6b8fae448"	[color=red,
				dir=forward,
				fontcolor="#2D3436",
				fontname="Sans-Serif",
				fontsize=13,
				label=Protects,
				lp="710.5,1038",
				pos="e,697.17,931.6 697.17,1119.8 697.17,1119.8 697.17,941.6 697.17,941.6",
				style=dotted];
		}
		subgraph "cluster_Load Balancer" {
			graph [bb="263,1091,395,1337",
				bgcolor="#F3E5F5",
				fontname="Sans-Serif",
				fontsize=13,
				label="Load Balancer",
				labeljust=l,
				labelloc=t,
				lheight=0.19,
				lp="318.5,1326",
				lwidth=1.32,
				margin=15,
				pencolor="#AEB6BE",
				rankdir=LR,
				shape=box,
				style=rounded
			];
			d5c4a9a6b9f04cd88b46433a570dd855	[height=2.6944,
				image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/load-balancers.png",
				label="cust1webSrvlb
(Load Balancer)
Port 80",
				pos="329,1203",
				shape=none,
				width=1.4028];
		}
		subgraph "cluster_DBSubnetName
(10.0.2.0/24)" {
			graph [bb="33,56,395,1016",
				bgcolor="#FFF3E0",
				fontname="Sans-Serif",
				fontsize=13,
				label="DBSubnetName
(10.0.2.0/24)",
				labeljust=l,
				labelloc=t,
				lheight=0.39,
				lp="93.5,998",
				lwidth=1.46,
				margin=20,
				pencolor="#AEB6BE",
				rankdir=LR,
				shape=box,
				style=rounded
			];
			"08bfdde6299949c1904d17e521aea176"	[height=2.6944,
				image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/network-security-groups-classic.png",
				label="dbNsg
(Allow SQL 1433)
(Block Internet)",
				pos="320,863",
				shape=none,
				width=1.4028];
			"57edcdc056a44d92989b85bf935e386d"	[height=1.9028,
				image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/network-interfaces.png",
				label=sqlSrvNIC,
				pos="183,532.5",
				shape=none,
				width=1.4028];
			"08bfdde6299949c1904d17e521aea176" -> "57edcdc056a44d92989b85bf935e386d"	[color=red,
				dir=forward,
				fontcolor="#2D3436",
				fontname="Sans-Serif",
				fontsize=13,
				label=Protects,
				lp="347.5,705",
				pos="e,204.5,601.1 269.34,773 238.31,773 204.5,773 204.5,773 204.5,773 204.5,611.1 204.5,611.1",
				style=dotted];
			ce293ebbfa864a62a74a42f59a938f52	[height=3.0972,
				image="/usr/local/lib/python3.13/dist-packages/resources/azure/compute/vm.png",
				label="cust1sqlSrv14
SQL Server 2022
Standard Edition
D4s_v3",
				pos="261,187.5",
				shape=none,
				width=1.4028];
			"57edcdc056a44d92989b85bf935e386d" -> ce293ebbfa864a62a74a42f59a938f52	[color=darkorange,
				dir=forward,
				fontcolor="#2D3436",
				fontname="Sans-Serif",
				fontsize=13,
				pos="e,222,299.06 222,463.93 222,463.93 222,309.06 222,309.06"];
			c9d380b4e05e4bc48a11818666e9656e	[height=2.3056,
				image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/public-ip-addresses.png",
				label="SqlPIP
(Management)",
				pos="125,863",
				shape=none,
				width=1.4028];
			c9d380b4e05e4bc48a11818666e9656e -> "57edcdc056a44d92989b85bf935e386d"	[color=gray,
				dir=forward,
				fontcolor="#2D3436",
				fontname="Sans-Serif",
				fontsize=13,
				label="RDP/Management",
				lp="184,705",
				pos="e,154,601.11 154,779.6 154,779.6 154,611.11 154,611.11",
				style=dashed];
		}
		d5c4a9a6b9f04cd88b46433a570dd855 -> "2d41e03756384225ac516ab6b8fae448"	[color=blue,
			dir=forward,
			fontcolor="#2D3436",
			fontname="Sans-Serif",
			fontsize=13,
			label="Port 80
(Backend Pool)",
			lp="556,1038",
			pos="e,664.83,931.53 379.64,1115 473.46,1115 664.83,1115 664.83,1115 664.83,1115 664.83,941.53 664.83,941.53"];
		d5c4a9a6b9f04cd88b46433a570dd855 -> "218cac8c02294e7dbfe43eb76de451ad"	[color=blue,
			dir=forward,
			fontcolor="#2D3436",
			fontname="Sans-Serif",
			fontsize=13,
			label="Port 80
(Backend Pool)",
			lp="379,1038",
			pos="e,506,931.8 379.72,1110 432.02,1110 506,1110 506,1110 506,1110 506,941.8 506,941.8"];
		"155881870d2b4ab7834207b4c846154b" -> ce293ebbfa864a62a74a42f59a938f52	[color=orange,
			dir=forward,
			fontcolor="#2D3436",
			fontname="Sans-Serif",
			fontsize=13,
			label="SQL:1433",
			lp="434,360",
			pos="e,311.56,284 638.83,420.97 638.83,354.91 638.83,284 638.83,284 638.83,284 321.56,284 321.56,284"];
		"817904b345f44c8d9ed3413e66458403" -> ce293ebbfa864a62a74a42f59a938f52	[color=orange,
			dir=forward,
			fontcolor="#2D3436",
			fontname="Sans-Serif",
			fontsize=13,
			label="SQL:1433",
			lp="293,360",
			pos="e,290.5,299.13 455.47,442 391.78,442 290.5,442 290.5,442 290.5,442 290.5,309.13 290.5,309.13"];
	}
	a5555fa22cd24a2a97414fddc2ddf286	[height=1.9028,
		image="/usr/local/lib/python3.13/dist-packages/resources/onprem/client/users.png",
		label="Internet Users",
		pos="329,1852.5",
		shape=none,
		width=1.4028];
	"9c8cda8688584b7bb1788d2c26646892"	[height=2.6944,
		image="/usr/local/lib/python3.13/dist-packages/resources/azure/network/public-ip-addresses.png",
		label="cust1websrvpip
(Web LB Public IP)
DNS: cust1websrvlb",
		pos="329,1565",
		shape=none,
		width=1.4028];
	a5555fa22cd24a2a97414fddc2ddf286 -> "9c8cda8688584b7bb1788d2c26646892"	[color=blue,
		dir=forward,
		fontcolor="#2D3436",
		fontname="Sans-Serif",
		fontsize=13,
		label="HTTPS/HTTP",
		lp="368.5,1723",
		pos="e,329,1662.1 329,1783.6 329,1783.6 329,1672.1 329,1672.1"];
	"9c8cda8688584b7bb1788d2c26646892" -> d5c4a9a6b9f04cd88b46433a570dd855	[color=blue,
		dir=forward,
		fontcolor="#2D3436",
		fontname="Sans-Serif",
		fontsize=13,
		pos="e,329,1300.3 329,1468 329,1468 329,1310.3 329,1310.3"];
}
